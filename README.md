### :hammer: ì†Œê°œ
Spring Legacyë¥¼ í™œìš©í•˜ì—¬ ì œì‘í•œ ë‚¨ì„± ì˜ë¥˜ ì‡¼í•‘ëª° ì‚¬ì´íŠ¸ì´ë‹¤. íƒ€ê²Ÿ ì—°ë ¹ì¸µì€ 20ëŒ€ì™€ 30ëŒ€ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ê³  ìˆê³ , íšŒì›ì˜ ì¢…ë¥˜ë¥¼ êµ¬ë§¤ì, íŒë§¤ìë¡œ ë‚˜ëˆ„ê³  ì´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬ì ê³„ì •
ìœ¼ë¡œ ì „ì²´ì ì¸ ê³„ì •ì„ ì¡°íšŒí•˜ê³  íŒë§¤ìë¡œ ê¶Œí•œì„ ìŠ¹ì¸í•˜ëŠ” ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤. ì°œí•˜ê¸°(ìœ„ì‹œë¦¬ìŠ¤íŠ¸), ì¥ë°”êµ¬ë‹ˆ(ì¹´íŠ¸), êµ¬ë§¤ì´ë ¥ì„ í†µí•œ ë¦¬ë·° ë“±ë¡ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆê³ , ê²°ì œëŠ” ì‚¬ì´íŠ¸ì˜
ê³ ìœ  ìºì‹œë¥¼ í™œìš©í•˜ì—¬ êµ¬ë§¤ í•  ìˆ˜ ìˆë‹¤. ìºì‹œëŠ” ì¹´ì¹´ì˜¤í˜ì´ ë‹¨ì¼ê²°ì œ APIë¥¼ í™œìš©í•˜ì—¬ ì¶©ì „ í•  ìˆ˜ ìˆë‹¤. ìŠ¤ë§ˆíŠ¸ë”œë¦¬ë²„ë¦¬APIë¥¼ í™œìš©í•˜ì—¬ ìš´ì†¡ì¥ ë²ˆí˜¸ë¡œ ë°°ì†¡ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ, ê°€ìƒì˜ 
ì‚¬ì´íŠ¸ì¸ ê´€ê³„ë¡œ ì‹¤ì œ ë°°ì†¡ì„ í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. íšŒì›ì€ ê°ìì˜ Rankì™€ Pointë¥¼ ê°€ì§€ê³  ìˆê³ , ê²°ì œë¥¼ í• ë•Œ ì¼ì • ë¹„ìœ¨ Pointë¥¼ íšë“í•  ìˆ˜ ìˆë‹¤. íšë“í•œ Pointì˜ ë¹„ìœ¨ì— ë”°ë¼ ì‚¬ìš©ìì˜ Rankë¥¼
ì •í•˜ê³  Rankì— ë”°ë¼ ìƒí’ˆì˜ ê°€ê²©ì„ í• ì¸í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤.


### ğŸ“š ì£¼ìš” ê¸°ëŠ¥
1. ì¹´ì¹´ì˜¤í˜ì´ ë‹¨ì¼ê²°ì œ APIë¥¼ í™œìš©í•˜ì—¬ ìºì‹œë¥¼ êµ¬ë§¤í•˜ê³  ìºì‹œë¡œ ìƒí’ˆì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
2. ê²°ì œì— ë”°ë¼ í¬ì¸íŠ¸ê°€ ìŒ“ì´ê³  ìŒ“ì¸ í¬ì¸íŠ¸ë¡œ ë­í¬ê°€ ì •í•´ì§€ê³  ë­í¬ì— ë”°ë¼ í• ì¸ìœ¨ì´ ì •í•´ì§€ëŠ” ê¸°ëŠ¥.
3. ìŠ¤ë§ˆíŠ¸íƒë°° APIë¥¼ í™œìš©í•œ ìš´ì†¡ì¥ ë²ˆí˜¸ ì¡°íšŒë¡œ ë°°ì†¡ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
4. ì°œí•˜ê¸°(ìœ„ì‹œë¦¬ìŠ¤íŠ¸) ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  jQueryì™€ Ajaxë¥¼ í™œìš©í•œ í˜ì´ì§• ì²˜ë¦¬.
5. ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ê³¼ ì¥ë°”êµ¬ë‹ˆì—ì„œ ë°”ë¡œ ê²°ì œ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
6. ë‹¤ì–‘í•œ ìƒí’ˆì„ ì¹´í…Œê³ ë¦¬ë¡œ êµ¬ë¶„í•˜ê³ , ì‹ ìƒí’ˆ,ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
7. ìƒí’ˆì˜ ì´ë¦„ìœ¼ë¡œ ìƒí’ˆì„ ê²€ìƒ‰ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.
8. êµ¬ë§¤ì´ë ¥ì—ì„œ ë¦¬ë·°ë¥¼ ì‘ì„± í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
9. ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ íŒë§¤ìì™€ êµ¬ë§¤ìë¥¼ êµ¬ë¶„í•˜ì—¬ ì¡°íšŒí•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥.

### :hammer: ê¸°ìˆ ìŠ¤íƒ 
<img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white"><img src="https://img.shields.io/badge/oracle-F80000?style=for-the-badge&logo=oracle&logoColor=white">
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=white">
<img src="https://img.shields.io/badge/html-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">

<img src="https://img.shields.io/badge/apache tomcat-F8DC75?style=for-the-badge&logo=apachetomcat&logoColor=white"><img src="https://img.shields.io/badge/sourcetree-blue?style=for-the-badge&logo=sourcetree&logoColor=white">
<img src="https://img.shields.io/badge/discord-purple?style=for-the-badge&logo=discord&logoColor=white">
<img src="https://img.shields.io/badge/eclipse-brown?style=for-the-badge&logo=eclipse&logoColor=white">
<img src="https://img.shields.io/badge/vscode-skyblue?style=for-the-badge&logo=vscode&logoColor=white">

### ğŸ“š ë‹´ë‹¹ì—…ë¬´

:bulb: ê¹€ë¬¸ì¢… : [íŒ€ì¥, ë©”ì¸ í˜ì´ì§€, ë§ˆì´ í˜ì´ì§€, íšŒì›ê´€ë¦¬, ì°œí•˜ê¸°, ì¹´ì¹´ì˜¤í˜ì´ ê²°ì œ, ë¹„ë™ê¸°ì²˜ë¦¬ í˜ì´ì§•, ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ë©”ì¼ ë°œì†¡, êµ¬ë§¤ ì´ë ¥]

:bulb: ì´ë™ìš° : [ë©”ì¸ í˜ì´ì§€, ìƒí’ˆ í˜ì´ì§€, ìƒí’ˆ ê²€ìƒ‰, ë°°ì†¡ ì¡°íšŒ, ë¦¬ë·° ë“±ë¡]

:bulb: ê¹€ìˆ˜í˜„ : [ìƒí’ˆ í˜ì´ì§€, ì¥ë°”êµ¬ë‹ˆ, í—¤ë”, ìƒí’ˆí˜ì´ì§€ í˜ì´ì§•]

### ğŸ“š ERD
![í™”ë©´ ìº¡ì²˜ 2023-02-01 162756](https://user-images.githubusercontent.com/110808552/215978814-204afd43-cded-4971-ba0c-eba804da5514.png)



### ğŸ“š ì½”ë“œ
#### ì¹´ì˜¤í˜ì´ ê²°ì œ

```
public String kakaoPay(String id, int money, HttpServletRequest req) {
		try {

			System.out.println("-----------kakaoPayí•¨ìˆ˜ ì‹œì‘--------------");
			String a_id = id;
			System.out.println("a_id = " + a_id);

			int a_cash = money;
			System.out.println("a_cash = " + a_cash);

			String approval_url = "http://localhost:8080/fj/doCharge?money=" + a_cash;
			System.out.println("approval_url = " + approval_url);

			URL address = new URL("https://kapi.kakao.com/v1/payment/ready");
			HttpURLConnection con = (HttpURLConnection) address.openConnection();
			con.setRequestMethod("POST");
			con.setRequestProperty("Authorization", "KakaoAK [App Key]");
			con.setRequestProperty("Content-type", "application/x-www-form-urlencoded;charset=utf-8");
			con.setDoOutput(true);
			String param = "cid=TC0ONETIME&partner_order_id=partner_order_id&partner_user_id=partner_user_id&item_name=kimmoonjong&quantity=1&total_amount="+ a_cash +"&vat_amount=200&tax_free_amount=0&approval_url="
					+ approval_url
					+ "&fail_url=http://localhost:8080/fj/goFail.go&cancel_url=http://localhost:8080/fj/goFail.go";
			OutputStream out = con.getOutputStream(); // ì£¼ëŠ” ì—­í• 
			DataOutputStream dos = new DataOutputStream(out); // ë°ì´í„° ì£¼ëŠ” ì—­í• 
			dos.writeBytes(param);
			dos.close();

			int result = con.getResponseCode();

			InputStream is;

			// httpì—ì„œ ì •ìƒì  ê²°ê³¼ëŠ” 200 ë‚˜ë¨¸ì§€ëŠ” ê·¸ëƒ¥ ì—ëŸ¬
			if (result == 200) {
				is = con.getInputStream();
			} else {
				is = con.getErrorStream();
			}
			InputStreamReader isr = new InputStreamReader(is);
			BufferedReader br = new BufferedReader(isr);
			return br.readLine();
		} catch (Exception e) {
			e.printStackTrace();
		}
		return "";
	}
```
#### ì„ì‹œë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°ì— ì•ì„œ ì•„ì´ë””ì™€ ì´ë©”ì¼ ì¼ì¹˜ ì¸í™•ì¸

```
public void findPw(HttpServletResponse response, Account a) throws IOException {
		// TODO Auto-generated method stub
		response.setContentType("text/html;charset=utf-8");
		Account ck = ss.getMapper(AccountMapper.class).findPW(a);
		PrintWriter out = response.getWriter();
		// ê°€ì…ëœ ì•„ì´ë””ì™€ ì´ë©”ì¼ì´ ì¼ì¹˜í•˜ëŠ”ê²Œ ì—†ë‹¤ë©´
		if (ck == null) {
			out.println("<script language ='javascript'>");
			out.println("alert('ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë”” í˜¹ì€ ì´ë©”ì¼ ì…ë‹ˆë‹¤.');");
			out.println("location.href='findpw.go';");
			out.println("</script>");
			out.close();
		} else {
			// ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±
			String pw = "";
			for (int i = 0; i < 12; i++) {
				pw += (char) ((Math.random() * 26) + 97);
			}
			a.setA_pw(pw);
			// ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
			if (ss.getMapper(AccountMapper.class).changePW(a) > 0) {
				// ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë©”ì¼ ë°œì†¡
				sendEmail(a, "findpw");
				out.println("<script language ='javascript'>");
				out.println("alert('ì´ë©”ì¼ë¡œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°œì†¡í•˜ì˜€ìŠµë‹ˆë‹¤.');");
				out.println("location.href='gohome.go';");
				out.println("</script>");
				out.close();
			} else {
				out.println("<script language ='javascript'>");
				out.println("alert('ì´ë©”ì¼ë¡œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°œì†¡ì„ ì‹¤íŒ¨ í•˜ì˜€ìŠµë‹ˆë‹¤.');");
				out.println("location.href='findpw.go';");
				out.close();
			}

		}
	}
```
#### ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ë°œì†¡

```
private void sendEmail(Account a, String div) {
		// Mail Server ì„¤ì •
		String charSet = "utf-8";
		String hostSMTP = "smtp.gmail.com"; // ë„¤ì´ë²„ ì´ìš©ì‹œ smtp.naver.com //êµ¬ê¸€ smtp.gmail.com
		String hostSMTPid = "[ì„œë²„ì´ë©”ì¼]"; // ì„œë²„ ì´ë©”ì¼ ì“°ê¸° (ë³´ë‚´ëŠ” ì‚¬ëŒ)
		String hostSMTPpwd = "[ì„œë²„ ì´ë©”ì¼ ì•± ë¹„ë°€ë²ˆí˜¸]"; // ì„œë²„ ì´ë©”ì¼ ë¹„ë²ˆ

		// ë³´ë‚´ëŠ” ì‚¬ëŒ EMail, ì œëª©, ë‚´ìš©
		String fromEmail = "SDMProject@naver.com";
		String fromName = "SDMall ì„ì‹œë¹„ë°€ë²ˆí˜¸ ë°œì†¡";
		String subject = "";
		String msg = "";

		if (div.equals("findpw")) {
			subject = "ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ì…ë‹ˆë‹¤.";
			msg += "<div align='center' style='border:1px solid black; font-family:verdana'>";
			msg += "<h3 style='color: blue;'>";
			msg += a.getA_id() + "ë‹˜ì˜ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.</h3>";
			msg += "<p>ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ : ";
			msg += a.getA_pw() + "</p></div>";
		}

		// ë°›ëŠ” ì‚¬ëŒ E-Mail ì£¼ì†Œ
		String mail = a.getA_email();
		try {
			HtmlEmail email = new HtmlEmail();
			email.setDebug(true);
			email.setCharset(charSet);
			email.setSSL(true);
			email.setHostName(hostSMTP);
			email.setSmtpPort(465); // ë„¤ì´ë²„ ì´ìš©ì‹œ 587 //êµ¬ê¸€ì€ 465

			email.setAuthentication(hostSMTPid, hostSMTPpwd);
			email.setTLS(true);
			email.addTo(mail, charSet);
			email.setFrom(fromEmail, fromName, charSet);
			email.setSubject(subject);
			email.setHtmlMsg(msg);
			email.send();
		} catch (Exception e) {
			System.out.println("ë©”ì¼ë°œì†¡ ì‹¤íŒ¨ : " + e);
		}
	}

```
#### ì°œí•˜ê¸° ë“±ë¡ê³¼ ìŠ¬ë¼ì´ì‹±
```
public void insertFavorite(Account a, Product p, HttpServletRequest req) {
		System.out.println("---------insertFavoriteí•¨ìˆ˜--------------");
		String p_no = req.getParameter("p_no");
		String a_id = req.getParameter("a_id");
		System.out.println("p_no = " + p_no);
		System.out.println("a_id = " + a_id);
		String favors = ss.getMapper(AccountMapper.class).selectFavor(a);
		System.out.println("favorsì— ê°’ì„ ë°›ì€ ì§í›„    favors = " + favors);
		if (favors == null || favors.isEmpty()) {
			System.out.println("-----isEmptyë¥¼ ê±°ì¹¨------");
			favors = ", " + p_no;
		} else {
			System.out.println("-----isEmptyë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ------");
			favors += ", " + p_no;
		}
		System.out.println("favorsì— [, p_no]ë¥¼ ë¶™ì¸ ì§í›„ favors = " + favors);
		HashMap<String, String> val = new HashMap<String, String>();
		val.put("p_list", favors);
		val.put("a_id", a_id);
		if (ss.getMapper(AccountMapper.class).updateFavorite(val) > 0) {
			System.out.println("ì°œí•˜ê¸° ë“±ë¡");
		}
	}
  public void showClientFavors(HttpServletRequest req, Product p) {
		System.out.println("--------showClientFavorsì‹œì‘-------");
		Account a = (Account) req.getSession().getAttribute("loginAccount");
		HashMap<String, String> val = new HashMap<String, String>();
		val.put("id", a.getA_id());
		String fa = ss.getMapper(AccountMapper.class).getFavor(val);
		if (fa != null) {
			String[] favorsArr = fa.split(", ");
			ArrayList<ProductForFavorite> products = new ArrayList<ProductForFavorite>();

			String sendImg = "";
			for (String s : favorsArr) {
				System.out.println("favorsArr = " + s);
				if (s.equals(" ") || s.equals("")) {
					continue;
				} else {
					System.out.println("elseë¬¸ìœ¼ë¡œ ë“¤ì–´ì˜´ s - " + s);
					Product pp = ss.getMapper(ProductMapper.class).getProductforFavor(s);
					System.out.println("pp.getP_img() = " + pp.getP_img());
					ProductForFavorite pf = new ProductForFavorite();
					int pno = pp.getP_no();
					String pname = pp.getP_name();
					int price = pp.getP_price();
					String[] imgSplit = pp.getP_img().split("!");
					sendImg = imgSplit[0];

					System.out.println("pno = " + pno);
					System.out.println("pname = " + pname);
					System.out.println("price = " + price);
					System.out.println("sendimg = " + sendImg);
					pf.setP_name(pname);
					pf.setP_no(pno);
					pf.setP_price(price);
					pf.setP_img(sendImg);

					products.add(pf);
				}
			}
			req.setAttribute("favorsPNO", products);
		}
	}
```
#### ì¥ë°”êµ¬ë‹ˆ
```
public void addcart(Product p ,CartDTO cart, HttpServletRequest req) {
		System.out.println("-------addCartí•¨ìˆ˜ ì‹œì‘---------");
		Account aa = (Account) req.getSession().getAttribute("loginAccount");
		if(aa != null) {
		cart.setA_id(aa.getA_id());
		System.out.println(aa.getA_id());

		Product pp= ss.getMapper(ProductMapper.class).getProduct(p);
		System.out.println("p_size = " + p.getP_size());
		cart.setP_no(p.getP_no());
		cart.setP_name(pp.getP_name());
		cart.setP_price(pp.getP_price());
		cart.setP_color(pp.getP_color());
		cart.setP_size(req.getParameter("p_size"));
		int cart_qty = Integer.parseInt( req.getParameter("cart_qty"));
		System.out.println("ìˆ˜ëŸ‰" + cart_qty);
		cart.setCart_qty(cart_qty);
		
		System.out.println(pp.getP_price());
		System.out.println(pp.getP_color());
		
		String[] imgSplit = pp.getP_img().split("!");
		ArrayList<String> imgs = new ArrayList<String>();
		for (String s : imgSplit) {
			System.out.println("í•œê¸€" + s);
			imgs.add(s);
		}
		cart.setP_img(imgSplit[0]);
		
		if(ss.getMapper(CartMapper.class).addCart(cart) == 1) {
			System.out.println("ì¥ë°”êµ¬ë‹ˆ ë“±ë¡ ì„±ê³µ");
		}else {
			System.out.println("ì¥ë°”êµ¬ë‹ˆ ë“±ë¡ ì‹¤íŒ¨");
		}
		}else {
			System.out.println("ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì„¸ìš”");
		}
	}
```
#### ë¦¬ë·° ë“±ë¡, ì¡°íšŒ
```
public void regReview(HttpServletRequest req, Review r, MultipartHttpServletRequest file) {
		System.out.println("--------regReviewí•¨ìˆ˜ ì‹œì‘--------");

		String path = req.getSession().getServletContext().getRealPath("resources/imgs");
		try {
			List<MultipartFile> list = file.getFiles("files");
			String img = "";
			for (int i = 0; i < list.size(); i++) {
				UUID uuid = UUID.randomUUID();
				String fileRealName = uuid + "_" + list.get(i).getOriginalFilename();
				long size = list.get(i).getSize();
				// System.out.println("íŒŒì¼ëª… :" + fileRealName);
				// System.out.println("ì‚¬ì´ì¦ˆ" + size);

				// System.out.println(uuid.toString());
				String[] uuids = uuid.toString().split("-");

				File saveFile = new File(path + "/" + fileRealName);
				try {
					list.get(i).transferTo(saveFile);
				} catch (IllegalStateException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				img += fileRealName + "!";
			}
			Account aa = (Account) req.getSession().getAttribute("loginAccount");
			ReviewMapper rm = ss.getMapper(ReviewMapper.class);

			int p_no = Integer.parseInt(req.getParameter("o_p_no"));
			String txt = req.getParameter("r_txt");
			int grade = Integer.parseInt(req.getParameter("r_grade"));
			System.out.println(img);
			System.out.println(txt);
			System.out.println(grade);
			System.out.println(aa.getA_id());

			r.setR_o_p_no(p_no);
			r.setR_a_id(aa.getA_id());
			r.setR_img(img);
			r.setR_txt(txt);
			r.setR_grade(grade);

			if (ss.getMapper(ReviewMapper.class).regReview(r) == 1) {
				req.setAttribute("r", "ë“±ë¡ ì„±ê³µ!");
			} else {
				req.setAttribute("r", "ë“±ë¡ ì‹¤íŒ¨!");

			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

public void productReviewSelect(HttpServletRequest req, Review r, Product p, Account a) {
		System.out.println("------productReviewSelect--------");
		
		int no = Integer.parseInt(req.getParameter("p_no"));
		ReviewMapper rm = ss.getMapper(ReviewMapper.class);

		List<Review> reviews = rm.getReviewProducts(no);
		List<Review> reviews2 = new ArrayList<Review>();

		for (Review rr : reviews) {
			String[] imge = rr.getR_img().split("!");
			rr.setR_img(imge[0]);
			reviews2.add(rr);
		}
		req.setAttribute("reviews", reviews2);

	}
```
#### í˜ì´ì§• ì•Œê³ ë¦¬ì¦˜, ajax í˜ì´ì§•
```
public ProductForFavorites paging(int page, HttpServletRequest request, Product p) {
		System.out.println("--------í˜ì´ì§•---------");
		request.setAttribute("curPageNo", page);
		System.out.println("page = " + page);
		ArrayList<ProductForFavorite> products = new ArrayList<ProductForFavorite>();
		products = (ArrayList<ProductForFavorite>) request.getAttribute("favorsPNO");
		if(products != null ) {
			if(!products.equals("")) {
				int cnt = 4; 
				int total = products.size();
				System.out.println("total = " + total);
				
				int pageCount = (int) Math.ceil(((double)total/cnt));
				System.out.println("pageCount = " + pageCount);
				request.setAttribute("pageCount", pageCount);
				int start = total - (cnt *(page - 1));
				int end = (page == pageCount) ? -1 : start - (cnt +1);
				System.out.println("start = " + start);
				System.out.println("end = " + end);
				ArrayList<ProductForFavorite> products2 = new ArrayList<ProductForFavorite>();
				if(total != 0) {
					for(int i=start-1; i> end; i--) {
						products2.add(products.get(i));
					}
					request.setAttribute("favorsPNO", products2);
					return new ProductForFavorites(products2);
				}
				
				
				return new ProductForFavorites(products);
				
			}
			
		}else {
			return new ProductForFavorites(products);
		}
		return null;
		
	}
  
  $(function() {
	$('#previousbtn').attr('disabled', true);
	$('#nextbtn').click(function() {
		
		console.log('click!!');
		let curPageNo = $('#curPageNo').val();
		let a_id = $('#a_id').val();
		
		console.log("curPageNo : " + curPageNo);
		console.log("a_id : " + a_id);
		
		curPageNo++;
			$.ajax({ 
				url: "favorsPaging2", 
				type: "GET", 
				data:{
					"a_id" : a_id,
					"curPageNo" : curPageNo
				},
			}).done(function(res) {
				console.log(res);
				console.log(res.favors.length)
				let f = res.favors
				let len = res.favors.length - 1;
				// ì§€ì›Œì§€ëŠ” ì—°ì‚°
				$('.favorSec').each(function(index, element) {
					console.log(index);
					console.log(element);
					$(element).remove();
					if(index == len) return false;
				})
				
				for(let i = 0; i < f.length; i++) {
					$('.favorites-div').append( 
							'<section id="favorSec" class="favorSec favorSec-'+ f[i].p_no + '" onclick="goDetail(' + f[i].p_no + ')">' +	
							'<img id="favorSecImg" src="resources/imgs/' + f[i].p_img + '">'		 +
							'<h3>' + f[i].p_name + '</h3>' + 
							'<h3>' + f[i].p_price + '</h3>' + 
							'</section>'		
							); 
				}
				$('#curPageNo').val(parseInt($('#curPageNo').val()) + 1);
				console.log("curPageNo after : " + curPageNo);
				if(parseInt(curPageNo) != 1) {
					console.log('ë§Œì¡±!!');
					$('#previousbtn').attr('disabled', false);
				} else {
					console.log('ë¶ˆë§Œì¡±');
				}
				
				if(curPageNo == $('#pageCount').val()) {
					$('#nextbtn').attr('disabled', true);
				} 
			});
	});
	
	 $('#previousbtn').click(function() {
		 console.log('click!!');
		 
		let curPageNo = $('#curPageNo').val();
		let a_id = $('#a_id').val();
		
		curPageNo--;

		$.ajax({ 
				url: "favorsPaging2", 
				type: "GET", 
				data:{
					"a_id" : a_id,
					"curPageNo" : curPageNo
				},
			}).done(function(res) {
				console.log(res);
				console.log(res.favors.length)
				let f = res.favors
				
				// ì§€ì›Œì§€ëŠ” ì—°ì‚°
				$('.favorSec').each(function(index, element) {
					$(element).remove();
				})
				
				for(let i = 0; i < f.length; i++) {
					$('.favorites-div').append( 
							'<section id="favorSec" class="favorSec favorSec-'+ f[i].p_no + '" onclick="goDetail(' + f[i].p_no + ')">' +	
							'<img id="favorSecImg" src="resources/imgs/' + f[i].p_img + '">'		 +
							'<h3>' + f[i].p_name + '</h3>' + 
							'<h3>' + f[i].p_price + '</h3>' + 
							'</section>'		
							); 
				}
				
				$('#curPageNo').val(parseInt($('#curPageNo').val()) - 1); 
				
				if(curPageNo == 1) {
					$('#previousbtn').attr('disabled', true);
				}
				if(curPageNo != $('#pageCount').val()) {
					$('#nextbtn').attr('disabled', false);
				} 
			}); 
	 });
	 
	 $('.wrapper').css('display','none');
	 $('#olbtn').click(function() {
		 if($('.wrapper').css('display') == 'flex'){
			$('.wrapper').css('display','none');
			$("#olbtn").html('êµ¬ë§¤ì´ë ¥ í¼ì¹˜ê¸°');
		 }else{
			$('.wrapper').css('display','flex');
			$("#olbtn").html('êµ¬ë§¤ì´ë ¥ ì ‘ê¸°');
		 }
		});
});
```

